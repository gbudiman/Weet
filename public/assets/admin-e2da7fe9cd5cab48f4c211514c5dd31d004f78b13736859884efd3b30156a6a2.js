var admin=function(){var t,e,i=function(){t=$("#content"),e=$("#refresh"),n(),r()},n=function(){e.on("click",function(){t.empty(),r()})},r=function(){$.ajax({method:"GET",url:"/weeters"}).done(t=>{t.forEach(t=>{s(t)}),a()})},a=function(){$("[karma-id]").each(function(){let t=$(this);t.editable({type:"text",pk:t.attr("karma-id"),url:"/edit/karma",title:"Edit karma (>0)",success:function(t){if(0==t.success&&"must_be_greater_than_zero"==t.error)return"Karma must be greater than zero"}})}),$("[streak-id]").each(function(){let t=$(this);t.editable({type:"text",pk:t.attr("streak-id"),url:"/edit/streak",title:"Edit winning streak (0~2)",success:function(t){if(0==t.success&&"streak_out_of_range"==t.error)return"Winning streak must be between 0 and 2 inclusive"}})}),$("[refill-id]").off("click").on("click",function(){let t=$(this),e=t.attr("refill-id");$.ajax({method:"POST",url:"/edit/refill",data:{id:e}}).done(e=>{e.success&&(t.parent().text("Scheduled "+moment(e.fill_time).fromNow()),t.hide())})})},s=function(e){let i,n="<span karma-id="+e.id+">"+e.karma+"</span>",r="<span streak-id="+e.id+">"+e.winning_streak+"</span>";i=null==e.karma_fill_time?"<button refill-id="+e.id+' class="btn btn-success">Schedule in 15 secs</button>':"Scheduled "+moment(e.karma_fill_time).fromNow(),t.append("<tr><td>"+e.id+"</td><td>"+e.name+'</td><td class="numeric">'+n+'</td><td class="numeric">'+r+"</td><td>"+i+"</td></tr>")};return{init:i}}();